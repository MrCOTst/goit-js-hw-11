{"mappings":"kgBAAe,SAAAA,EAAmBC,GACzB,MAAQ,yDAEGA,EAAKC,sBAAsBD,EAAKE,oHAGxBF,EAAKG,qFAGLH,EAAKI,wFAGFJ,EAAKK,4FAGJL,EAAKM,0DCTrC,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,yBAC/BC,YAAaF,SAASC,cAAc,gBACpCE,iBAAkBH,SAASC,cAAc,aAGrCG,EAAkB,IAAI,EAAAC,EAAAC,SACtBC,EAAiB,ICbR,MAMbC,QAAQC,GACN,MAAMC,EAAO,GAIb,OAHAA,EAAKC,OAASX,SAASC,cAAcQ,GACrCC,EAAKE,MAAQF,EAAKC,OAAOV,cAAc,UACvCS,EAAKG,QAAUH,EAAKC,OAAOV,cAAc,YAClCS,EAGTI,SACEC,KAAKL,KAAKC,OAAOK,UAAW,EAC5BD,KAAKL,KAAKE,MAAMK,YAAc,YAC9BF,KAAKL,KAAKG,QAAQK,UAAUC,IAAI,aAGlCH,WACED,KAAKL,KAAKC,OAAOK,UAAW,EAC5BD,KAAKL,KAAKE,MAAMK,YAAc,aAC9BF,KAAKL,KAAKG,QAAQK,UAAUE,OAAO,aAGrCC,OACEN,KAAKL,KAAKC,OAAOO,UAAUE,OAAO,aAGpCE,OACEP,KAAKL,KAAKC,OAAOO,UAAUC,IAAI,aA9BjCI,aAAYd,SAAEA,EAAQe,OAAEA,GAAS,IAC/BT,KAAKL,KAAOK,KAAKP,QAAQC,GACzBe,GAAUT,KAAKO,SDUuB,CACxCb,SAAU,4BACVe,QAAQ,IAuBV,SAASC,IACPlB,EAAeS,WACfZ,EAAgBsB,gBAAgBC,MAAKpC,IAoDvC,SAA4BqC,GAC1B,MAAMC,EAASD,EAAKE,KAAKC,KAAIxC,GAAQD,EAAUC,KAAOyC,KAAK,IAC3DlC,EAAKK,iBAAiB8B,mBAAmB,YAAaJ,GArDpDK,CAAmB3C,GACnBgB,EAAeO,SACc,IAAzBV,EAAgB+B,MAAc5C,EAAKuC,KAAKM,QAC1CC,EAAAC,OAAOC,QAAQ,oBAAoBhD,EAAKiD,qBAGrCjD,EAAKuC,KAAKM,QAAW7C,EAAKiD,WAQ/BC,QAAQC,IAAInD,EAAKuC,KAAKM,QACtBK,QAAQC,IAAItC,EAAgBuC,aAC5BF,QAAQC,IAAIE,KAAKC,KAAKtD,EAAKuC,KAAKM,OAAShC,EAAgBuC,cACzDF,QAAQC,IAAItC,EAAgB+B,OAGxB5C,EAAKuC,KAAKM,QAAU7C,EAAKiD,WAC3BjD,EAAKuC,KAAKM,OAAShC,EAAgBuC,YAAc,GAEjDN,EAAAC,OAAOQ,KAAK,mEACZvC,EAAee,aALjB,IAZEe,EAAAC,OAAOS,QACL,iFAEFxC,EAAee,WA8CrB,SAAS0B,IACPlD,EAAKK,iBAAiB8C,UAAY,GAhFpCnD,EAAKI,YAAYgD,iBAAiB,UAGlC,SAAqBC,GAMnB,GALAA,EAAEC,iBACFJ,IACA5C,EAAgBiD,MAAQF,EAAEG,cAAcC,SAASC,YAAYC,MAAMC,OACnEtD,EAAgBuD,YAEc,KAA1BvD,EAAgBiD,MAIlB,OAHAhB,EAAAC,OAAOQ,KAAK,2BACZE,SACAzC,EAAee,OAGjBG,IAEAlB,EAAec,UAhBjBd,EAAeG,KAAKC,OAAOuC,iBAAiB,QAASzB","sources":["src/js/card-markup.js","src/js/01-two-button.js","src/js/lode-more-button.js"],"sourcesContent":["export default function photoCard(data) {\n         return  `\n        <div class=\"photo-card\">\n        <img src=\"${data.webformatURL}\" alt=\"${data.tags} \" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes: </b>${data.likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views: </b>${data.views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments: </b>${data.comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads: </b>${data.downloads}\n          </p>\n        </div>\n      </div>`\n       };","import '../css/styles.css';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport PhotoApiService from './photo-service';\nimport LoadMoreButton from './lode-more-button';\nimport photoCard from './card-markup';\n\nconst refs = {\n  submit: document.querySelector('button[type=\"submit\"]'),\n  inputSearch: document.querySelector('.search-form'),\n  galleryConteiner: document.querySelector('.gallery'),\n};\n\nconst photoApiService = new PhotoApiService();\nconst loadMoreButton = new LoadMoreButton({\n  selector: '[data-action=\"load-more\"]',\n  hidden: true,\n});\n\nrefs.inputSearch.addEventListener('submit', startSearch);\nloadMoreButton.refs.button.addEventListener('click', fatchCards);\n\nfunction startSearch(e) {\n  e.preventDefault();\n  clearGalleryConteiner();\n  photoApiService.query = e.currentTarget.elements.searchQuery.value.trim();\n  photoApiService.resetPage();\n\n  if (photoApiService.query === '') {\n    Notify.info('Please enter something.');\n    clearGalleryConteiner();\n    loadMoreButton.hide();\n    return;\n  }\n  fatchCards();\n\n  loadMoreButton.show();\n}\n\nfunction fatchCards() {\n  loadMoreButton.disabled();\n  photoApiService.fetchArticles().then(data => {\n    appendGalleryCards(data);\n    loadMoreButton.enable();\n    if (photoApiService.page === 2 && data.hits.length) {\n      Notify.success(`Hooray! We found ${data.totalHits} images.`);\n    }\n\n    if (!data.hits.length && !data.totalHits) {\n      Notify.warning(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      loadMoreButton.hide();\n      return;\n    }\n\n    console.log(data.hits.length);\n    console.log(photoApiService.fotoForPage);\n    console.log(Math.ceil(data.hits.length / photoApiService.fotoForPage));\n    console.log(photoApiService.page);\n\n    if (\n      (!data.hits.length && data.totalHits) ||\n      data.hits.length / photoApiService.fotoForPage < 1\n    ) {\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n      loadMoreButton.hide();\n      // observer.unobserve(refs.observe);\n      return;\n    }\n\n    // if (data.hits.length < photoApiService.fotoForPage) {\n    //   loadMoreButton.hide();\n    //   // console.log(Math.ceil(data.hits.length / photoApiService.fotoForPage))\n    //   return;\n    // }\n\n    // if ((data.hits.length / photoApiService.fotoForPage) < 1 ) {\n    //   loadMoreButton.hide();\n    //   console.log(Math.ceil(data.hits.length / photoApiService.fotoForPage));\n    //   // Notify.info(\n    //   //   \"We're sorry, but you've reached the end of search results.\");\n    //   return;\n    // }\n\n    // if (Math.ceil(data.hits.length / photoApiService.fotoForPage) === (photoApiService.page) ) {\n    //   loadMoreButton.hide();\n    //   console.log(Math.ceil(data.hits.length / photoApiService.fotoForPage))\n    //   return;\n    // }\n  });\n}\n\nfunction appendGalleryCards(data) {\n  const markup = data.hits.map(data => photoCard(data)).join('');\n  refs.galleryConteiner.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGalleryConteiner() {\n  refs.galleryConteiner.innerHTML = '';\n}\n","export default class LoadMoreButton {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n    hidden && this.hide();\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n    return refs;\n  }\n\n  enable() {\n    this.refs.button.disabled = false;\n    this.refs.label.textContent = 'Show more';\n    this.refs.spinner.classList.add('is-hidden');\n  }\n\n  disabled() {\n    this.refs.button.disabled = true;\n    this.refs.label.textContent = 'Loading...';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}\n"],"names":["$02ed5811993e6f78$export$2e2bcd8739ae039","data","webformatURL","tags","likes","views","comments","downloads","$476f459b54f67b09$var$refs","submit","document","querySelector","inputSearch","galleryConteiner","$476f459b54f67b09$var$photoApiService","$fhPA4","default","$476f459b54f67b09$var$loadMoreButton","getRefs","selector","refs","button","label","spinner","enable","this","disabled","textContent","classList","add","remove","show","hide","constructor","hidden","$476f459b54f67b09$var$fatchCards","fetchArticles","then","data1","markup","hits","map","join","insertAdjacentHTML","$476f459b54f67b09$var$appendGalleryCards","page","length","$iQIUW","Notify","success","totalHits","console","log","fotoForPage","Math","ceil","info","warning","$476f459b54f67b09$var$clearGalleryConteiner","innerHTML","addEventListener","e","preventDefault","query","currentTarget","elements","searchQuery","value","trim","resetPage"],"version":3,"file":"01-two_button.eaa17458.js.map"}